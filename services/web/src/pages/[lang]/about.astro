---
import Base from '../../layouts/Base.astro';
import Topbar from '../../components/Topbar.astro';
import { isLocale, type Locale } from '../../i18n/config';
import { t } from '../../i18n/utils';

const { lang } = Astro.params;
if (!lang || !isLocale(lang)) return Astro.redirect('/en/about', 302);
const locale = lang as Locale;

// TODO: Read session from cookie via Connect RPC GetSession call
const loggedIn = false;
---

<Base title={t(locale, 'about.title')} lang={locale}>
    <Topbar slot="topbar" locale={locale} />

    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8">
                    <div class="about-header">
                        <figure class="about-avatar">
                            <img src="/images/profile.jpeg" alt={t(locale, 'about.imgAltProfile')}>
                        </figure>
                        <div>
                            <h1 class="title is-3" style="margin-bottom: 0.25rem;">{t(locale, 'about.name')}</h1>
                            <p class="subtitle is-6 is-muted" style="margin-bottom: 0;">{t(locale, 'about.jobTitle')}</p>
                        </div>
                    </div>

                    <div class="divider mt-4 mb-5"></div>

                    <div class="content is-medium" style="color: var(--fresh-muted);">
                        <p set:html={t(locale, 'about.bio1')} />
                        <p>{t(locale, 'about.bio2')}</p>
                    </div>

                    {loggedIn && (
                        <div class="buttons are-medium mt-4">
                            <a class="button primary-btn btn-outlined is-rounded" href="https://www.linkedin.com/in/jredhooper/" target="_blank" rel="noopener" title="LinkedIn">
                                <span class="icon"><i class="fab fa-linkedin"></i></span>
                            </a>
                            <a class="button btn-outlined is-rounded" href="https://www.threads.com/@jredhoo" target="_blank" rel="noopener" title="Threads" style="border-color: var(--fresh-dark); color: var(--fresh-dark);">
                                <span class="icon"><i class="fab fa-threads"></i></span>
                            </a>
                            <a class="button secondary-btn btn-outlined is-rounded" href="https://www.instagram.com/jredhoo" target="_blank" rel="noopener" title="Instagram">
                                <span class="icon"><i class="fab fa-instagram"></i></span>
                            </a>
                            <a class="button btn-outlined is-rounded" href="https://discord.gg/4GaWgtaZ" target="_blank" rel="noopener" title="Discord" style="border-color: #5865F2; color: #5865F2;">
                                <span class="icon"><i class="fab fa-discord"></i></span>
                            </a>
                        </div>
                    )}

                    <div class="mt-6">
                        <h2 class="title is-4">{t(locale, 'about.meetBigsby')}</h2>
                        <div class="columns is-variable is-4 mt-3">
                            <div class="column is-6">
                                <figure class="image is-4by3">
                                    <img class="about-img" src="/images/bigs.jpeg" alt={t(locale, 'about.imgAltBigsby')}>
                                </figure>
                                <p class="has-text-centered has-text-fresh-muted mt-2" style="font-size: 0.9rem;">{t(locale, 'about.captionBigsby')}</p>
                            </div>
                            <div class="column is-6">
                                <figure class="image is-4by3">
                                    <img class="about-img" src="/images/me-and-bigs.jpeg" alt={t(locale, 'about.imgAltTogether')}>
                                </figure>
                                <p class="has-text-centered has-text-fresh-muted mt-2" style="font-size: 0.9rem;">{t(locale, 'about.captionTogether')}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</Base>

<style>
    .about-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }
    .about-avatar {
        flex-shrink: 0;
    }
    .about-avatar img {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        object-fit: cover;
        object-position: top;
    }
    .about-img {
        border-radius: 6px;
        object-fit: cover;
        width: 100%;
        height: 100%;
    }
    @media screen and (max-width: 768px) {
        .about-header {
            flex-direction: column;
            text-align: center;
        }
    }
</style>
